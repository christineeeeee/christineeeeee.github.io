<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Christine">
    
    

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Martingale Approach to Achieve Certain Occurrence of Sequence Patterns"/>
<meta name="twitter:description" content="A classic probability problem: repeatedly toss a coin until consecutive pattern HTHT shows up, what&rsquo;s the expected number of tosses?
 The normal solution to this problem is to use markov chains to calculate the expected time of the pattern to show up. However, there&rsquo;s another more efficient way. This way was first came out in 1980 by Shuo-Yen Robert Li in his paper A Martigale Approach to the Study of Occurrence of Sequence Patterns in Repeated Experiments."/>

    <meta property="og:title" content="Martingale Approach to Achieve Certain Occurrence of Sequence Patterns" />
<meta property="og:description" content="A classic probability problem: repeatedly toss a coin until consecutive pattern HTHT shows up, what&rsquo;s the expected number of tosses?
 The normal solution to this problem is to use markov chains to calculate the expected time of the pattern to show up. However, there&rsquo;s another more efficient way. This way was first came out in 1980 by Shuo-Yen Robert Li in his paper A Martigale Approach to the Study of Occurrence of Sequence Patterns in Repeated Experiments." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://christineeeeee.com/posts/martingale_coin_toss/" />
<meta property="article:published_time" content="2020-08-02T22:36:15+00:00" />
<meta property="article:modified_time" content="2020-08-02T22:36:15+00:00" />


    
      <base href="https://christineeeeee.com/posts/martingale_coin_toss/">
    
    <title>
  Martingale Approach to Achieve Certain Occurrence of Sequence Patterns Â· Stop this train
</title>

    
      <link rel="canonical" href="https://christineeeeee.com/posts/martingale_coin_toss/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="/css/coder.min.c6a6f7e4e5b9eae62968f9dee6cad8903a7a12c11df9305249ee05c53679cafe.css" integrity="sha256-xqb35OW56uYpaPne5srYkDp6EsEd&#43;TBSSe4FxTZ5yv4=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="/css/custom.css" />
    

    

    

    <link rel="icon" type="image/png" href="https://christineeeeee.com/images/avatar.jpg" sizes="32x32">
    <link rel="icon" type="image/png" href="https://christineeeeee.com/images/avatar.jpg" sizes="16x16">

    <meta name="generator" content="Hugo 0.63.1" />

  </head>

  
  
  <body class="colorscheme-light">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Stop this train
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://christineeeeee.com/posts/">Posts</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://christineeeeee.com/pieces/">Pieces</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://christineeeeee.com/newsletter/">Newsletter</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://christineeeeee.com/about/">About</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Martingale Approach to Achieve Certain Occurrence of Sequence Patterns</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2020-08-02T22:36:15Z'>
                August 2, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              4-minute read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="/tags/math/">Math</a></div>

        </div>
      </header>

      <div>
        
        <p>A classic probability problem: repeatedly toss a coin until consecutive pattern HTHT shows up, what&rsquo;s the expected number of tosses?</p>
<div style="display:block;width:100%;text-align:center">
<img src="/images/toss_coin.jpg" style="width:60%">
</div>
<p>The normal solution to this problem is to use markov chains to calculate the expected time of the pattern to show up. However, there&rsquo;s another more efficient way. This way was first came out in 1980 by Shuo-Yen Robert Li in his paper <em>A Martigale Approach to the Study of Occurrence of Sequence Patterns in Repeated Experiments</em>. This post will introduce Li&rsquo;s idea briefly.</p>
<p>In Li&rsquo;s paper, to solve this problem, he constructed a gambler game and I will use the HTHT pattern to explain his approach.</p>
<p>Let&rsquo;s assume there&rsquo;s a gambler with 1 dollar coming to a casino and his goal is to have pattern HTHT:</p>
<ul>
<li>On his first day, he bet his first toss to be H with his 1 dollar. If he wins, he could stay in the game and double his entrance fee, which is 2 dollars now. If he loses, he loses all of his money and leaves the game.</li>
<li>On his second day, he bet his second toss to be T with all of his money. The rule stays the same: double his money to 4 dollars or lose everything.</li>
<li>On his third day, he bet his third toss to be H with all of his money. The rule stays the same.</li>
<li>On his fourth day, he bet his third toss to be T with all of his money. The rule stays the same.</li>
</ul>
<p>The essence of this game is that, every day for the casino and the gambler, the game is fair. The expectation of the game is 0 because everyday, gambler has $\frac{1}{2}$ probability of doubling his money and $\frac{1}{2}$ probability of losing all of his money.</p>
<p>Here, Li&rsquo;s idea is, there&rsquo;s a gambler team and everyday, they send a person to the casino and each game is the same as the game we described above. Every gambler is independent of each other. We use ${X_n,n=0,1,2,\ldots}$ to represent after $n$th day the net income of the gambler team, and $X_0=0$. Since the game is fair, we know ${X_n}$ is a martingale.</p>
<p>If $\tau$ is the expected number of tosses, then $\tau$ is a stopping time. According to the Doob&rsquo;s Identity, if ${X_n, n=0,1,2,\ldots}$ is a martingale and $\tau$ is a stopping time, then $EX_{\tau \wedge n}$ = $EX_0$ for any $n$. So, for our question here, $EX_{\tau}$ = $EX_0$ = 0. Obviously, we could get: $X_{\tau} = W - \tau$, where $W$ is the sum of all the money all the gamblers have at the end of $\tau$th day and $\tau$ represents the entrance fees the team brought into the casino.</p>
<p>Back to the HTHT game, we could calculate the sum of the money of all the gamblers who are still in the game in order to know the expectation of $\tau$. We know that only $\tau - 3$th day to $\tau$th day are still in the game since $\tau$th day is the first time when the pattern HTHT shows up. The gambler who came to the casino is the luckiest guy since he&rsquo;s got all the tosses correct so he has 16 dollars; for the gambler who comes to the casino on the $\tau - 1$th day got his first two tosses correct so he has 4 dollars. For gamblers who comes to the casino on the $\tau - 2$th day and $\tau$th day, they came and tossed T first so their tosses didn&rsquo;t meet with the pattern and they lost all of their money. In all, there are 20 dollars in the gamblers&rsquo; hands so $E\tau$ = 20, which represents the expected number of tosses we need to get the correct pattern.</p>
<p>It may not seem that obvious that this approach is more efficient but for longer pattern such as 6Hs, this approach shows its edge. If we use markov chain to do this problem, it is long and tedious but if we use this way, $E\tau$ = $2^6 + 2^5 + 2^4 + 2^3 + 2^2 + 2$ = 126.</p>

      </div>


      <footer>
        


        
        
        <script src="https://utteranc.es/client.js"
  repo= "christineeeeee/christineeeeee.github.io"
  issue-term="pathname"
  theme="github-light"
  crossorigin="anonymous"
  async>
</script>
      </footer>
    </article>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" id="MathJax-script"></script>
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'], ['\\(', '\\)']
        ],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
    
    
  </section>

</footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-171417581-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


  </body>

</html>
